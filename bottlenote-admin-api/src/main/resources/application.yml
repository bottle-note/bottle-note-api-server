# 기본 서버 설정
app: # 애플리케이션 및 배포 정보
  type: admin
  info:
    server-name: ${SERVER_NAME:unknown}
    environment: ${SPRING_PROFILES_ACTIVE:local}
    git-branch: ${GIT_BRANCH:unknown}
    git-commit: ${GIT_COMMIT:unknown}
    git-build-time: ${BUILD_TIME:unknown}
server:
  port: ${SERVER_PORT:8080}
  servlet:
    context-path: /admin/api/v1
    encoding:
      charset: UTF-8
  tomcat:
    threads:
      max: 15
    max-connections: 20
    connection-timeout: 5000

spring:
  profiles:
    include:
      - datasource
      - external
  jackson:
    time-zone: Asia/Seoul

# Spring Security
security:
  jwt:
    secret-key: ${JWT_SECRET_KEY:c2VjdXJlU2VjcmV0S2V5MTIzNDU2Nzg5MGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6QWJDRGVGR2hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlrSg==}
    access-token-expiration: 86400 # 하루 (24시간)
    refresh-token-expiration: 2592000 # 한 달 (30일)
  nonce:
    salt: ${NONCE_SALT:bottle-note-secure-salt-2024}
apple:
  bundle-id: "com.bottlenote.official.app"

# 기본 로깅 설정
logging:
  level:
    root: info

# OTEL 비활성화
management:
  tracing:
    enabled: false
  otlp:
    metrics:
      export:
        enabled: false

--- # default/local 프로파일 (동일 설정)
spring:
  config:
    activate:
      on-profile: default,local

logging:
  level:
    root: info
    app.bottlenote: info

management:
  tracing:
    enabled: false
  otlp:
    metrics:
      export:
        enabled: false

server:
  tomcat:
    threads:
      max: 15
    max-connections: 20
    connection-timeout: 5000

schedules:
  history:
    view:
      sync:
        enable: false

--- # debug 프로파일 (디버그 로그만, SQL 로깅 없음)
spring:
  config:
    activate:
      on-profile: debug

logging:
  level:
    root: debug
    app.bottlenote: debug
    org.springframework: debug
    org.hibernate.SQL: off
    org.hibernate.orm.jdbc.bind: off

management:
  tracing:
    enabled: false
  otlp:
    metrics:
      export:
        enabled: false

server:
  tomcat:
    threads:
      max: 15
    max-connections: 20
    connection-timeout: 5000

--- # dev 프로파일 (개발 서버)
spring:
  config:
    activate:
      on-profile: dev

logging:
  level:
    root: info
    app.bottlenote: info

management:
  tracing:
    enabled: false
  otlp:
    metrics:
      export:
        enabled: false

server:
  tomcat:
    threads:
      max: 15
    max-connections: 20
    connection-timeout: 5000

--- # prod 프로파일 (운영 서버)
spring:
  config:
    activate:
      on-profile: prod

logging:
  level:
    root: info
    app.bottlenote: warn

management:
  tracing:
    enabled: false
  otlp:
    metrics:
      export:
        enabled: false

server:
  tomcat:
    threads:
      max: 100
    max-connections: 500
    connection-timeout: 30000

## 요약(Summary)

> 이 문서는 리뷰 등록 기능을 구현하기 위해 작성된 테크스펙입니다.<br>
> 유저는 alcohol에 리뷰를 달 수 있습니다. 리뷰는 기본적으로 등록, 수정, 조회, 삭제, 댓글 기능이 제공됩니다. <br>
---------

## 목표(Goals)

- 리뷰 등록 API를 구현한다.
- 리뷰 등록 테스트코드를 구현한다.

---------

## 요구사항 정의

- 로그인 한 유저는 위스키에 대하여 리뷰를 작성할 수 있다.
  - 로그인 하지 않은 유저는 리뷰를 작성할 수 없음

- 리뷰 작성 시 술의 ID를 필수로 입력해야 한다.(공백, Null값 허용 X)
- 리뷰의 상태는 기본적으로 PUBLIC(공개)로 작성된다.
  - PRIVATE은 비공개이며, 자기자신을 제외한 다른 유저에게 리뷰가 보이지 않는다.
- 마신 술의 SizeType을 GLASS(잔), BOTTLE(술) 중 하나로 작성할 수 있다.  (작성하지 않아도 무방함)
- 마신 술의 가격을 작성할 수 있다. (작성하지 않아도 무방함)
- 술을 마신 곳의 위치 정보를 작성할 수 있다. (작성하지 않아도 무방함)
  - 위치정보는 우편번호(zipCode), 주소, 상세주소이며, 우편번호는 5 ~ 7글자 사이의 길이로 제한
- 리뷰를 등록할때 이미지를 첨부할 수 있다. (작성하지 않아도 무방함)
  - 이미지 개수는 5장으로 제한되며, 경로와 순서를 가지고 있다.
- 테이스팅 태그는 최대 12자 총 10건 등록 가능하다.
  - 테이스팅 태그에 비속어가 포함될 수 없고, 중복된 태그는 허용하지 않는다.


- API  :  `POST /api/v1/reviews`

## 어떤 것을 요청해야 할까

    - RequestBody로 전달되는 매개변수

- 위스키 아이디
- 별점
- 공개여부
- 내용
- 잔/보틀 여부
- 가격
- 장소
  - 우편번호
  - 주소
  - 상세주소
- 이미지 정보
  - 업로드된 이미지 경로들
- 테이스팅 태그
  - 작성된 태그 목록

## 어떤 것을 응답해야 할까

- 작성된 리뷰 ID
- 성공 OR 실패 message
- 작성한 리뷰의 상세 조회 페이지 URL(Redirect용)

## 어떤 것을 검증해야 할까

- 리뷰를 작성하려고 하는 술이 데이터베이스에 저장되어 있는 술인지
- 리뷰 작성에 필요한 필수 값들이 모두 작성이 되었는지? (술 ID, 유저 ID, 리뷰 내용)
- 리뷰 내용의 길이가 500자 이하인지?
- ReviewStatus와 SizeType의 값이 정의된 문자열로 요청이 들어왔는지 ?
  - (PUBLIC, STATUS), (BOTTLE, GLASS)
- price값이 정상적인 값인지? (음수의 값이 들어올 수 없음 or 비상식적으로 높은 값)
- 테이스팅 태그에 비속어가 포함되지 않았는지? 중복 된 테이스팅 태그가 포함되지 않았는지?

### **Error Code**

- 400 : Bad Request
  - 잘못된 요청 , 필수 파라미터 누락
- 401 : Unauthorized
  - 인증되지 않은 사용자
- 404 : Not Found
  - 해당 id의 위스키가 존재하지 않음
  - 해당 id의 유저가 존재하지 않음
- 500 : Internal Server Error
  - 서버 에러 ( 서버 내부 로직 에러 )

------

---------

